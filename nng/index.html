<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A safe Rust wrapper for NNG"><meta name="keywords" content="rust, rustlang, rust-lang, nng"><title>nng - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../nng/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate nng</p><div class="block version"><p>Version 1.0.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all nng's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="nng" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">nng</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../clipboard.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/nng/lib.rs.html#1-203" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A safe Rust wrapper for NNG</p>
<h2 id="what-is-nng" class="section-header"><a href="#what-is-nng">What Is NNG</a></h2>
<p>From the <a href="https://github.com/nanomsg/nng">NNG Github Repository</a>:</p>
<blockquote>
<p>NNG, like its predecessors nanomsg (and to some extent ZeroMQ), is a
lightweight, broker-less library, offering a simple API to solve common
recurring messaging problems, such as publish/subscribe, RPC-style
request/reply, or service discovery. The API frees the programmer
from worrying about details like connection management, retries, and other
common considerations, so that they can focus on the application instead of
the plumbing.</p>
</blockquote>
<h2 id="nng-rs" class="section-header"><a href="#nng-rs">Nng-rs</a></h2>
<p>This crate provides a safe wrapper around the NNG library, seeking to
maintain an API that is similar to the original library. As such, the
majority of examples available online should be easy to apply to this crate.</p>
<h3 id="rust-version-requirements" class="section-header"><a href="#rust-version-requirements">Rust Version Requirements</a></h3>
<p>The current version requires <strong>Rustc v1.36 or greater</strong>. In general, this
crate should always be able to compile with the Rustc version available on
the oldest currently-supported Ubuntu LTS release. Changes to the minimum
required Rustc version will only be considered a breaking change if the
newly required version is not available on the oldest currently-supported
Ubuntu LTS release.</p>
<p><strong>NOTE:</strong> This does not necessarily mean that this crate will build without
installing packages on Ubuntu LTS, as NNG currently requires a version of
CMake (v3.13) that is newer than the one available in the LTS repositories.</p>
<h3 id="features" class="section-header"><a href="#features">Features</a></h3>
<ul>
<li><code>build-nng</code> (default): Build NNG from source and statically link to the
library.</li>
<li><code>ffi-module</code>: Expose the raw FFI bindings via the <code>nng::ffi</code> module. This
is useful for utilizing NNG features that are implemented in the base
library but not this wrapper. Note that this exposes some internal items
of this library and it directly exposes the NNG library, so anything
enabled by this can change without bumping versions.</li>
</ul>
<h3 id="building-nng" class="section-header"><a href="#building-nng">Building NNG</a></h3>
<p>Enabling the <code>build-nng</code> feature will cause the NNG library to be built
using the default settings and CMake generator.  Most of the time, this
should just work.  However, in the case that the default are not the desired
settings, there are three ways to change the build:</p>
<ol>
<li><a href="https://doc.rust-lang.org/cargo/reference/manifest.html#the-patch-section">Patch</a> the <code>nng-sys</code> dependency and enable the desired build features.</li>
<li>Disable the <code>build-nng</code> feature and directly depend on <code>nng-sys</code>.</li>
<li>Disable the <code>build-nng</code> feature and manually compile NNG.</li>
</ol>
<p>The build features are not exposed in this crate because Cargo features are
currently <a href="https://github.com/rust-lang/cargo/issues/2980">strictly additive</a> and there is no way to specify mutually
exclusive features (i.e., build settings).  Additionally, it does not seem
very ergonomic to have this crate expose all of the same build features as
the binding crate, which could lead to feature pollution in any dependent
crates.</p>
<p>Merge requests for a better solution to this are more than welcome.</p>
<h3 id="examples" class="section-header"><a href="#examples">Examples</a></h3>
<p>The following example uses the <a href="https://nanomsg.github.io/nng/man/v1.2.2/nng_inproc.7">intra-process</a> transport to set up a
<a href="https://nanomsg.github.io/nng/man/v1.2.2/nng_req.7">request</a>/<a href="https://nanomsg.github.io/nng/man/v1.2.2/nng_rep.7">reply</a> socket pair. The “client” sends a string to the
“server” which responds with a nice phrase.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">nng</span>::<span class="kw-2">*</span>;

<span class="kw">const</span> <span class="ident">ADDRESS</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;inproc://nng/example&quot;</span>;

<span class="kw">fn</span> <span class="ident">request</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
    <span class="comment">// Set up the client and connect to the specified address</span>
    <span class="kw">let</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">Socket::new</span>(<span class="ident">Protocol::Req0</span>)<span class="question-mark">?</span>;
    <span class="ident">client</span>.<span class="ident">dial</span>(<span class="ident">ADDRESS</span>)<span class="question-mark">?</span>;

    <span class="comment">// Send the request from the client to the server. In general, it will be</span>
    <span class="comment">// better to directly use a `Message` to enable zero-copy, but that doesn&#39;t</span>
    <span class="comment">// matter here.</span>
    <span class="ident">client</span>.<span class="ident">send</span>(<span class="string">&quot;Ferris&quot;</span>.<span class="ident">as_bytes</span>())<span class="question-mark">?</span>;

    <span class="comment">// Wait for the response from the server.</span>
    <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">client</span>.<span class="ident">recv</span>()<span class="question-mark">?</span>;
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">msg</span>[..], <span class="string">b&quot;Hello, Ferris&quot;</span>);
    <span class="prelude-val">Ok</span>(())
}

<span class="kw">fn</span> <span class="ident">reply</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
    <span class="comment">// Set up the server and listen for connections on the specified address.</span>
    <span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">Socket::new</span>(<span class="ident">Protocol::Rep0</span>)<span class="question-mark">?</span>;
    <span class="ident">server</span>.<span class="ident">listen</span>(<span class="ident">ADDRESS</span>)<span class="question-mark">?</span>;

    <span class="comment">// Receive the message from the client.</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">server</span>.<span class="ident">recv</span>()<span class="question-mark">?</span>;
    <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">msg</span>[..], <span class="string">b&quot;Ferris&quot;</span>);

    <span class="comment">// Reuse the message to be more efficient.</span>
    <span class="ident">msg</span>.<span class="ident">push_front</span>(<span class="string">b&quot;Hello, &quot;</span>);

    <span class="ident">server</span>.<span class="ident">send</span>(<span class="ident">msg</span>)<span class="question-mark">?</span>;
    <span class="prelude-val">Ok</span>(())
}
</pre></div>
<p>Additional examples are in the <code>examples</code> directory.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="options/index.html" title="nng::options mod">options</a></td><td class="docblock-short"><p>Options available to configure NNG constructs.</p>
</td></tr></table><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Aio.html" title="nng::Aio struct">Aio</a></td><td class="docblock-short"><p>An asynchronous I/O context.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Context.html" title="nng::Context struct">Context</a></td><td class="docblock-short"><p>A socket context.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Dialer.html" title="nng::Dialer struct">Dialer</a></td><td class="docblock-short"><p>An active outgoing connection.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.DialerBuilder.html" title="nng::DialerBuilder struct">DialerBuilder</a></td><td class="docblock-short"><p>Configuration utility for NNG dialers.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Header.html" title="nng::Header struct">Header</a></td><td class="docblock-short"><p>The header of a <a href="struct.Message.html"><code>Message</code></a>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Listener.html" title="nng::Listener struct">Listener</a></td><td class="docblock-short"><p>Active listener for incoming connections.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ListenerBuilder.html" title="nng::ListenerBuilder struct">ListenerBuilder</a></td><td class="docblock-short"><p>Configuration utility for nanomsg-next-generation listeners.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Message.html" title="nng::Message struct">Message</a></td><td class="docblock-short"><p>An NNG message type.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Pipe.html" title="nng::Pipe struct">Pipe</a></td><td class="docblock-short"><p>An NNG communication pipe.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.RawSocket.html" title="nng::RawSocket struct">RawSocket</a></td><td class="docblock-short"><p>A socket that is open in “raw” mode.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Socket.html" title="nng::Socket struct">Socket</a></td><td class="docblock-short"><p>An NNG socket.</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.AioResult.html" title="nng::AioResult enum">AioResult</a></td><td class="docblock-short"><p>The result of an <a href="struct.Aio.html"><code>Aio</code></a> operation.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.Error.html" title="nng::Error enum">Error</a></td><td class="docblock-short"><p>Errors potentially returned by NNG operations.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.PipeEvent.html" title="nng::PipeEvent enum">PipeEvent</a></td><td class="docblock-short"><p>An event that happens on a <a href="struct.Pipe.html"><code>Pipe</code></a> instance.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.Protocol.html" title="nng::Protocol enum">Protocol</a></td><td class="docblock-short"><p>Describes a relationship between a socket and all sockets to which it is
connected.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.SocketAddr.html" title="nng::SocketAddr enum">SocketAddr</a></td><td class="docblock-short"><p>Represents the addresses used by the underlying transports.</p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.forwarder.html" title="nng::forwarder fn">forwarder</a></td><td class="docblock-short"><p>Forwards messages between two sockets.</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.reflector.html" title="nng::reflector fn">reflector</a></td><td class="docblock-short"><p>Reflects a socket’s sent messages back at itself.</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.Result.html" title="nng::Result type">Result</a></td><td class="docblock-short"><p>Specialized <code>Result</code> type for use with NNG.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="nng" data-search-index-js="../search-index.js" data-search-js="../search.js"></div><script src="../main.js"></script></body></html>